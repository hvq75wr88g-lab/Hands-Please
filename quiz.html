<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Breakfast Quiz</title>
  <style>
    :root{
      --eggshell: #f3efe6;
      --ink: #1f2328;
      --muted: #5d6671;
      --card: rgba(255,255,255,.85);
      --cardBorder: rgba(25, 25, 25, .10);
      --accent: #c07a2a;
      --danger: #b2342a;
      --ok: #2f7a45;
    }

    *{ box-sizing: border-box; }
    body{
      margin: 0;
      color: var(--ink);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background-color: var(--eggshell);
      /* Simple speckled texture */
      background-image: radial-gradient(#ccc 1px, transparent 1px), radial-gradient(#ccc 1px, transparent 1px);
      background-size: 20px 20px;
      background-position: 0 0, 10px 10px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden; /* Prevent scrolling, keep app feel */
    }

    /* Main layout: Question top, HUD bottom */
    .wrap{
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
      width: 100%;
      height: 100%;
    }

    /* Top Section: Header + Question Card */
    .topSection{
      flex: 1; /* Takes available top space */
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }

    header{
      text-align: center;
    }
    header h1{ margin: 0; font-size: 20px; color: var(--accent); }
    header p{ margin: 0; font-size: 12px; color: var(--muted); }

    .card{
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,.08);
      display: flex;
      flex-direction: column;
      gap: 14px;
      max-height: 60vh; /* Don't get too tall */
      overflow-y: auto;
    }

    .qMeta{ display:flex; justify-content: space-between; font-size: 12px; color: var(--muted); font-weight: 600; }
    .question{ font-size: 18px; font-weight: 600; line-height: 1.4; margin: 0; }

    .choices{ display: grid; gap: 8px; }
    .choice{
      display: flex; align-items: center; gap: 12px;
      padding: 12px 14px;
      border: 1px solid rgba(0,0,0,.15);
      border-radius: 12px;
      background: #fff;
      cursor: pointer;
      transition: all .2s;
      font-size: 15px;
    }
    .choice:hover{ border-color: var(--accent); background: #fffcf5; }
    .choice input{ accent-color: var(--accent); transform: scale(1.2); }

    .btnPrimary{
      background: var(--accent); color: #fff; border: none;
      padding: 12px; border-radius: 12px; font-weight: bold; font-size: 16px;
      cursor: pointer; width: 100%; margin-top: 10px;
    }
    .btnPrimary:disabled{ opacity: 0.5; }

    /* Bottom Section: HUD (Eggs + Giant Chicken) */
    .bottomSection{
      flex: 0 0 auto; /* Don't shrink */
      height: 35vh;   /* Bottom 35% of screen */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      position: relative;
    }

    .eggs{
      display: flex; gap: 12px; margin-bottom: 10px; z-index: 20;
    }
    .egg{
      width: 40px; height: 52px;
      background: #fff; border: 2px solid #ddd;
      border-radius: 50% 50% 45% 45%;
      box-shadow: 0 4px 0 rgba(0,0,0,.1);
    }
    .egg.cracked{
      background: #e0e0e0;
      background-image: linear-gradient(45deg, transparent 48%, #555 50%, transparent 52%);
      transform: rotate(10deg);
    }

    /* THE CHICKEN STAGE */
    .chickenStage{
      width: 260px;
      height: 260px;
      position: relative;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    /* SVG Styles */
    svg.chickenSVG{
      width: 100%; height: 100%;
      overflow: visible;
      display: none; /* Hidden by default */
      filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
    }

    /* Active States */
    .showHappy .c-happy{ display: block; animation: jump 0.6s ease infinite alternate; }
    .showAngry .c-angry{ display: block; animation: rage 0.1s linear infinite; }
    .showWink  .c-wink { display: block; animation: breathe 3s ease-in-out infinite; }

    /* Keyframes */
    @keyframes jump { from{transform: translateY(0);} to{transform: translateY(-20px);} }
    @keyframes rage { 0%{transform: translate(0,0);} 25%{transform: translate(-2px,2px);} 50%{transform: translate(2px,-2px);} 75%{transform: translate(-2px,-2px);} 100%{transform: translate(0,0);} }
    @keyframes breathe { 0%,100%{transform: scale(1);} 50%{transform: scale(1.02) translateY(-2px);} }

    /* PECKING (Game Over) Animation */
    .peckingMode .c-angry{
      display: block;
      animation: peckScreen 0.8s ease-in-out infinite;
      transform-origin: bottom center;
    }
    @keyframes peckScreen {
      0% { transform: scale(1) translateY(0); }
      40% { transform: scale(1.8) translateY(20px); } /* COMES AT YOU */
      100% { transform: scale(1) translateY(0); }
    }

    /* GAME OVER MESSAGE (Top Half, Floating) */
    .gameOverMsg{
      position: absolute;
      top: 15%; left: 50%; transform: translateX(-50%);
      background: #fff;
      border: 3px solid var(--danger);
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      width: 80%;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
      z-index: 100;
      display: none;
      animation: dropIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .gameOverMsg h2{ color: var(--danger); margin: 0 0 10px; font-size: 24px; }
    .gameOverMsg button{ background: var(--ink); color: #fff; border:none; padding: 10px 20px; border-radius: 8px; font-size: 16px; cursor: pointer; }
    @keyframes dropIn{ from{top: -50%;} to{top: 15%;} }

    /* Admin Footer */
    footer{
      position: fixed; bottom: 5px; right: 10px;
      font-size: 12px; z-index: 200;
    }
    footer a{ color: var(--muted); text-decoration: none; opacity: 0.5; }

    /* Admin Modal */
    .modalOverlay{
      position: fixed; inset: 0; background: rgba(0,0,0,0.5);
      z-index: 300; display: none; place-items: center;
    }
    .adminPanel{
      background: #fff; width: 90%; max-width: 500px;
      padding: 20px; border-radius: 12px;
      max-height: 80vh; overflow-y: auto;
    }
    .adminRow{ margin-bottom: 10px; display: flex; gap: 10px; }
  </style>
</head>

<body class="showWink" id="body"> <!-- Default to Wink state -->

  <div class="wrap">
    <!-- TOP HALF: Questions -->
    <div class="topSection">
      <header>
        <h1>Hands Please!</h1>
        <p>Breakfast Training</p>
      </header>

      <div class="card" id="quizCard">
        <div class="qMeta">
          <span id="qCount">Q 1/9</span>
          <span id="score">Score: 0</span>
        </div>
        <div class="question" id="qText">Loading...</div>
        <div class="choices" id="choicesArea"></div>
        <button class="btnPrimary" id="submitBtn">Submit Answer</button>
        <div id="feedback" style="text-align:center; min-height:20px; font-weight:bold; color:var(--accent);"></div>
      </div>
    </div>

    <!-- BOTTOM HALF: The Stage -->
    <div class="bottomSection">
      <!-- Lives -->
      <div class="eggs">
        <div class="egg" id="egg1"></div>
        <div class="egg" id="egg2"></div>
        <div class="egg" id="egg3"></div>
      </div>

      <!-- Giant Chicken Container -->
      <div class="chickenStage">
        
        <!-- HAPPY CHICKEN (White, Arms Up) -->
        <svg class="chickenSVG c-happy" viewBox="0 0 200 200">
          <g transform="translate(0,10)">
            <!-- Legs -->
            <path d="M85 170 L80 190 M115 170 L120 190" stroke="#f39c12" stroke-width="6" stroke-linecap="round" />
            <!-- Body -->
            <path d="M50 110 C50 60 150 60 150 110 C150 160 50 160 50 110" fill="#fff" stroke="#333" stroke-width="4"/>
            <!-- Wings UP -->
            <path d="M45 100 Q10 50 40 40" fill="none" stroke="#fff" stroke-width="15" stroke-linecap="round"/>
            <path d="M45 100 Q10 50 40 40" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round"/>
            <path d="M155 100 Q190 50 160 40" fill="none" stroke="#fff" stroke-width="15" stroke-linecap="round"/>
            <path d="M155 100 Q190 50 160 40" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round"/>
            <!-- Face -->
            <circle cx="100" cy="80" r="35" fill="#fff" stroke="#333" stroke-width="4"/>
            <!-- Comb -->
            <path d="M85 55 Q100 30 115 55" fill="#e74c3c" stroke="#
